$((function(){$(".pref_modal_link").magnificPopup({type:"inline",closeBtnInside:false})}));$("#pref_all").click((function(){$(".region").prop("checked",!this.checked);$(".region").click()}));$(".region").click((function(){$(this).parent().next("td").find("input[type=checkbox]").prop("checked",this.checked)}));$(".area_submit").click((function(){setPrefectures()}));$(document).on("click",".mfp-close",(function(){setPrefectures()}));$(document).on("click",".mfp-bg",(function(){setPrefectures()}));function setPrefectures(){var checklist=$("input[name='data[Breeder][prefecture_id][]']:checked").next("label.checkbox").text();if(checklist.length>18){checklist=checklist.substring(0,18)+"..."}else if(!checklist){checklist="選択する"}$(".select_prefecture").text(checklist);$.magnificPopup.close()}